=====================================================================
                     BEFORE MIGRATION (CURRENT STATE)
=====================================================================

┌───────────────────────┐
│   datapostingtasks    │   ← Original Live Table
└───────────────────────┘



=====================================================================
                     FORWARD MIGRATION PROCESS
=====================================================================

-----------------------------
STEP 1 — Back up original table
-----------------------------

┌───────────────────────┐      sp_rename        ┌───────────────────────────────┐
│   datapostingtasks    │  ─────────────────→   │ datapostingtasks_bkp_121225   │
└───────────────────────┘                        └───────────────────────────────┘


-----------------------------
STEP 2 — Create NEW table
-----------------------------

┌───────────────────────────────┐
│ datapostingtasks_bkp_121225   │   ← backup of original table
└───────────────────────────────┘

┌───────────────────────┐
│ datapostingtasks_new  │   ← new structure created
└───────────────────────┘


-----------------------------
STEP 3 — Copy data old → new
-----------------------------

datapostingtasks_bkp_121225  
             │
             │  INSERT INTO ... SELECT ...
             ▼

┌───────────────────────┐
│ datapostingtasks_new  │   ← new table now filled with data
└───────────────────────┘


-----------------------------
STEP 4 — Swap tables (new becomes live)
-----------------------------

┌───────────────────────┐       sp_rename       ┌───────────────────────┐
│ datapostingtasks_new  │  ─────────────────→   │   datapostingtasks    │  ← NEW active table
└───────────────────────┘                        └───────────────────────┘

┌───────────────────────────────┐
│ datapostingtasks_bkp_121225   │  ← OLD original table (backup)
└───────────────────────────────┘



=====================================================================
                     ROLLBACK PROCESS (UNDO MIGRATION)
=====================================================================

-----------------------------
ROLLBACK STEP 1 — Move new active table out of the way
-----------------------------

┌───────────────────────┐       sp_rename       ┌───────────────────────────────────┐
│   datapostingtasks    │  ─────────────────→   │ datapostingtasks_new_rollback    │
└───────────────────────┘                        └───────────────────────────────────┘


-----------------------------
ROLLBACK STEP 2 — Restore original table
-----------------------------

┌───────────────────────────────┐       sp_rename       ┌───────────────────────┐
│ datapostingtasks_bkp_121225   │  ─────────────────→   │   datapostingtasks    │  ← Original restored
└───────────────────────────────┘                        └───────────────────────┘


-----------------------------
ROLLBACK STEP 3 — Cleanup (optional)
-----------------------------

┌───────────────────────────────────┐
│ datapostingtasks_new_rollback    │  ← new table moved aside
└───────────────────────────────────┘
             │
             └── DROP TABLE (optional)


=====================================================================
                     FINAL STATE AFTER ROLLBACK
=====================================================================

┌───────────────────────┐
│   datapostingtasks    │   ← Original table restored exactly as before
└───────────────────────┘